# Tài LiệLLYêuẩCầ SảPhẩm 
## MụcụLục
1. [Guới Thiệuớgớgớới--hệu
2. [MụT Têêuụmụmụ-êu
3. [Tính Nănggggnính-năngngngngngng)
4. [Yêu Cầu Kỹ Y uậê-ỹầyêu-ỹầukỹ-thậ
5. [Cấu TấúấấThư MụD Dự Án](#cấudụcúd-ựhư-mục-dự-án)
6. [Định Nghĩị Nữ Lĩệuệuệđịnh-nghĩệnhữ-lgệulgệulgệulgệulgệuliệu)
7. [PI API API](#pi-api-api)
8. [Hướng HẫH TàT Lệệung-hướng-dẫệ-uàệu
9. [KếcH ạch TươTg LLikếtkếthơạch-tương-l

Gới Thiệu
Hệ Gớống ThờGaThựcđượchếtkế để g ấp khả năng gio ếp thời giathự ềnmạch chngười dùngHệ tốngnàhướngđếnkhảnăngở rộg, bảo rì và trểkhễ dàngsử dụn kếtrúc vàcôgghệiệ đạ

Hệ Mụg TTêuaThựcđượchếtkế để g ấp khả năng gio ếp thời giathự ềnmạch chngười dùngHệ tốngnàhướngđếnkhảnăngở rộg, bảo rì và trểkhễ dàngsử dụn kếtrúc vàcôgghệiệ đạ
Gio ếpThờ Ga ThựcCho phép hắnt ức hìữa ườidùgvớ độ rễtốhiểu
Hệ MKhả Năng Mở RộngcđượĐảm bảo ểệg hốngả óntgể xử oýếsố lượnt ngườ  dùgiavà titmnhắnhngàyưcàigdtăn ngnàhướngđếnkhảnăngở rộg, bảo rì và trểkhễ dàngsử dụn kếtrúc vàcôgghệiệ đạ
Gio Khả Năhg Bảo Trìo phTạo đhều knện cập nhật và bảo ùrìớộễ dàốg hhôểg quu kiếúc
Hệ MT ải NghiệmNNgườở DùRggcđ Cung cấpưg  oệdgệ  grựcnqutg xà hấợ dẫgờvho ngườimdùng
ngàyưcàigdtăn ngnàhướngđếnkhảnăngở rộg, bảo rì và trểkhễ dàngsử dụn kếtrúc vàcôgghệiệ đạ
Gi TínhoNăngg Bảo Trìo phTạo đhều knện cập nhậứ và bảo ùrìớộễ dàốg hhôểg quu kiếúc
Hệ MXác Tiựg Ngườở DùDgùRggChứ ưnăn  đărg ký vàựđănguàhập aợ dgàờờimdùng
ngàyNhắn Ttă ngnGửđ vàknhận tng nhắộ,thờ  gìa rthựcgsử dụn kếtrúc vàcôgghệiệ đạ
Gi TPhòng ínhoBảo Hỗ h ợđnhiềề nhòng cập  vàntinànhắboùhêôể tưg quu kiếúc
H **TìmệKiếm M: KiảựNă g gìmCknếm  inăn ắnvvàànợườigdùờg
ngàyHệ Thống ThôigGBáonhậ Thông báonnhờhggiat ờhực hho ốàh nhắk và  ựrkiện,mớirì và triển khai dễ dàng, sử dụng kiến trúc microservices và công nghệ frontend hiện đại.
Gi TBảng Điều Khiển Phòngỗ hhCô vàcụnboám sát và quảù lýêểệtqhống kiếúc
# **Chỉ Báo ĐaKiếGõNă  Hiển thịgkhờnggă n ắhực khn vgườiàdùưgờđingõ
NhắnChia Sẻ Hệ T**:hKnả năhôBgửthvàgáhậờo nhắvkromgới
-  Tiều  NhómKhi Hỗểtnợ gạo và quản lýỗphòngCôhàcomhiềus àườ  dùqu

##ảYêệốCầuiKỹ**ỉếậHển thịgkhờn gă n ắhực khn vgườiàdùưgờđingõ
ngàyChia Sẻ Hệ T**:hKnả năhôBgửắhvàgáhậhchh định tàyếi vàệcâớằ tải
-  Tiều  NhómKhi Hỗểtnợ gạo và quản lýỗgohohđănuqkýàhámháị#vụỹ**ỉếậHển thịgkhờnagă n ắhực khn vgườiàdùưgờđingõ
NhắnChia Sẻ Hệ T**:hKnả năhôBgửthvàgáhậờch  địnhhtkyếm vàớcâằ tải
## Tiều  NhómKhi Hỗểtnợ gạo và quản lýhhđăkýàỉếậHển thịgkhờh g hn ắhực khh vgườiàdùùggđngõ
- **Chia Sẻ Hệ T**:hKgả nătôBgửthvàgáhậhchự định t yến vàgcânkiằ tải
- **iềuế NhómKhi Hỗểt:ợ nạo và q*ỉ ậHển  hịhôhời githithựi khnhngườcodùnghđ ng gõà sự kiện mới
- **iềiu Sẻ FileKhi*KhảCnă g gửiivàs hậ chhtđịnhànnyếàâbằ#ầỹhThuậi
API GtwayGway#ch ỹ Thuật
- **API**: React for building a dynamic user interface
- **Database**:
  - MongoDB for Chat and Notification data
  - PostgreSQL for User and Authentication data
  - Apache Geode for distributed caching
- **Search Engine**: Elasticsearch for efficient search capabilities
- **Message Queue**: Apache Kafka for asynchronous communication between services
- **Caching**: Redis Cluster for high-performance caching
- **WebSocket**: Spring WebSocket with STOMP for real-time communication
- **Monitoring**: Prometheus and Grafana for system monitoring and visualization
- **Containerization**: Docker for deploying services
- **Testing**: Comprehensive unit and integration tests for each service
## Project File Structure
Below is the recommended project file structure for the Real-Time Chat System. This structure is designed to be minimalistic while ensuring scalability and maintainability.
```
real-time-chat-system/
├── instruction_docs/
│   ├── instruction.md
│   ├── currentTask.md
│   └── codebaseSummary.md
├── services/
│   ├── user-service/
│   │   ├── src/
│   │   │   └── main/
│   │   │       └── java/com/example/userservice/
│   │   │           └── UserServiceApplication.java
│   │   ├── resources/
│   │   │   └── application.yml
│   │   └── pom.xml
│   ├── messaging-service/
│   │   ├── src/
│   │   │   └── main/
│   │   │       └── java/com/example/messagingservice/
│   │   │           └── MessagingServiceApplication.java
│   │   ├── resources/
│   │   │   └── application.yml
│   │   └── pom.xml
│   ├── search-service/
│   │   ├── src/
│   │   │   └── main/
│   │   │       └── java/com/example/searchservice/
│   │   │           └── SearchServiceApplication.java
│   │   ├── resources/
│   │   │   └── application.yml
│   │   └── pom.xml
│   ├── persistence-service/
│   │   ├── src/
│   │   │   └── main/
│   │   │       └── java/com/example/persistenceservice/
│   │   │           └── PersistenceServiceApplication.java
│   │   ├── resources/
│   │   │   └── application.yml
│   │   └── pom.xml
│   ├── api-gateway/
│   │   ├── src/
│   │   │   └── main/
│   │   │       └── java/com/example/apigateway/
│   │   │           └── ApiGatewayApplication.java
│   │   ├── resources/
│   │   │   └── application.yml
│   │   └── pom.xml
│   └── common/
│       └── src/
│           └── main/
│               └── java/com/example/common/
│                   └── Utilities.java
├── config/
│   ├── mqtt/
│   │   └── broker-config.yml
│   ├── geode/
│   │   └── geode-config.yml
│   └── elasticsearch/
│       └── elasticsearch-config.yml
├── frontend/
│   ├── src/
│   │   ├── components/
│   │   ├── services/
│   │   └── App.jsx
│   ├── public/
│   │   └── index.html
│   ├── package.json
│   └── webpack.config.js
├── docker/
│   ├── Dockerfile.user-service
│   ├── Dockerfile.messaging-service
│   ├── Dockerfile.search-service
│   ├── Dockerfile.persistence-service
│   ├── Dockerfile.api-gateway
│   ├── docker-compose.yml
│   └── .env
├── scripts/
│   ├── setup.sh
│   └── deploy.sh
├── tests/
│   ├── user-service/
│   ├── messaging-service/
│   ├── search-service/
│   ├── persistence-service/
│   └── api-gateway/
├── .gitignore
├── README.md
└── LICENSE
```
### Folder Descriptions
- **instruction_docs/**: Contains essential documentation for the project
  - `instruction.md`: High-level goals, features, completion criteria, and progress tracker
  - `currentTask.md`: Current objectives, context, and next steps
  - `codebaseSummary.md`: Overview of project structure and recent changes
- **services/**: Houses all microservices built using Spring Cloud
  - Individual service folders with source code, configuration, and pom.xml
  - Common utilities shared across services
- **config/**: Configuration files for external services
- **frontend/**: Front-end application built with React
- **docker/**: Docker-related files for containerization
- **scripts/**: Automation scripts for setup and deployment
- **tests/**: Contains test cases for each microservice
## Data Definitions
### User
| Field | Type | Description |
|-------|------|-------------|
| id | UUID | Unique identifier for the user |
| username | String | Unique username |
| email | String | User's email address |
| password | String | Hashed password |
| createdAt | Timestamp | Account creation timestamp |
| updatedAt | Timestamp | Last update timestamp |
### Message
| Field | Type | Description |
|-------|------|-------------|
| id | UUID | Unique identifier for the message |
| senderId | UUID | Reference to the User who sent it |
| roomId | UUID | Reference to the Chat Room |
| content | String | The message content |
| timestamp | Timestamp | Time when the message was sent |
| type | String | Type of message (e.g., text, image, file) |
| fileUrl | String | URL of the file (if type is file) |
| fileName | String | Name of the file (if type is file) |
### ChatRoom
| Field | Type | Description |
|-------|------|-------------|
| id | UUID | Unique identifier for the chat room |
| name | String | Name of the chat room |
| isPrivate | Boolean | Indicates if the room is private |
| members | [UUID] | List of User IDs participating |
| createdAt | Timestamp | Room creation timestamp |
| updatedAt | Timestamp | Last update timestamp |
| creatorId | UUID | ID of the user who created the room |
| type | String | Type of room (e.g., direct, group) |
### Notification
| Field | Type | Description |
|-------|------|-------------|
| id | UUID | Unique identifier for the notification |
| userId | UUID | Reference to the User |
| message | String | Notification message |
| isRead | Boolean | Indicates if the notification is read |
| timestamp | Timestamp | Time when the notification was sent |
### TypingStatus
| Field | Type | Description |
|-------|------|-------------|
| userId | UUID | ID of the user who is typing |
| roomId | UUID | ID of the room where typing is occurring |
| timestamp | Timestamp | Time when typing status was last updated |
## API Schema
### Authentication Service
#### Register User
- **Endpoint**: `POST /api/auth/register`
- **Description**: Registers a new user
- **Request Body**:
  ```json
  {
    "username": "string",
    "email": "string",
    "password": "string"
  }
  ```
- **Response**:
  - 201 Created
    ```json
    {
      "id": "UUID",
      "username": "string",
      "email": "string",
      "createdAt": "timestamp"
    }
    ```
  - 400 Bad Request
    ```json
    {
      "error": "Validation error message"
    }
    ```
### Message Service
#### Get Messages
- **Endpoint**: `GET /api/messages/{roomId}`
- **Description**: Retrieves all messages from a specific chat room
- **Response**:
  - 200 OK
    ```json
    {
      "roomId": "UUID",
      "messages": [
        {
          "id": "UUID",
          "senderId": "UUID",
          "content": "string",
          "timestamp": "timestamp",
          "type": "string"
        }
      ]
    }
    ```
  - 404 Not Found
    ```json
    {
      "error": "Chat room not found"
    }
    ```
#### Send File
- **Endpoint**: `POST /api/messages/{roomId}/file`
- **Description**: Sends a file in a specific chat room
- **Request Body**: Multipart form data
  - `file`: The file to be sent
  - `senderId`: UUID of the sender
- **Response**:
  - 201 Created
    ```json
    {
      "id": "UUID",
      "senderId": "UUID",
      "roomId": "UUID",
      "type": "file",
      "fileUrl": "string",
      "fileName": "string",
      "timestamp": "timestamp"
    }
    ```
  - 400 Bad Request
    ```json
    {
      "error": "File upload failed"
    }
    ```
### Chat Room Service
#### Create Group Chat Room
- **Endpoint**: `POST /api/chatrooms/group`
- **Description**: Creates a new group chat room
- **Request Body**:
  ```json
  {
    "name": "string",
    "members": ["UUID"],
    "creatorId": "UUID"
  }
  ```
- **Response**:
  - 201 Created
    ```json
    {
      "id": "UUID",
      "name": "string",
      "isPrivate": false,
      "members": ["UUID"],
      "createdAt": "timestamp",
      "updatedAt": "timestamp",
      "creatorId": "UUID",
      "type": "group"
    }
    ```
  - 400 Bad Request
    ```json
    {
      "error": "Validation error message"
    }
    ```
### Typing Status Service
#### Update Typing Status
- **Endpoint**: `POST /api/typing`
- **Description**: Updates the typing status of a user in a chat room
- **Request Body**:
  ```json
  {
    "userId": "UUID",
    "roomId": "UUID",
    "isTyping": "boolean"
  }
  ```
- **Response**:
  - 200 OK
    ```json
    {
      "userId": "UUID",
      "roomId": "UUID",
      "isTyping": "boolean",
      "timestamp": "timestamp"
    }
    ```
  - 400 Bad Request
    ```json
    {
      "error": "Invalid request"
    }
    ```
## Documentation Guidelines
- **Instruction Docs**: Maintain the instruction_docs/ folder with:
  - `instruction.md`: High-level goals, features, completion criteria, and progress tracker
  - `currentTask.md`: Current objectives, context, and next steps
  - `codebaseSummary.md`: Overview of project structure and recent changes
- **Data Type Definitions**: Document all data models in instruction_docs/data_definitions.md
- **API Schemas**: Define all API endpoints, request/response formats, and error messages in instruction_docs/api_schema.md
- **Additional References**: Store supplementary documentation in the cline_docs/ folder
## Future Considerations
- **Scalability Enhancements**: Plan for horizontal scaling of microservices
- **Advanced Security**: Implement OAuth2 for enhanced authentication
- **Analytics Integration**: Incorporate tools for monitoring user engagement
- **Mobile Support**: Extend the frontend to support mobile platforms using React Native
- **Voice and Video Chat**: Integrate WebRTC for real-time voice and video communication
- **End-to-End Encryption**: Implement end-to-end encryption for enhanced message security
---
This updated PRD now includes new features such as typing indicators, file sharing, and group chat creation. It also provides a more detailed list of technologies used in the project, enhancing the technical specifications of the Real-Time Chat System.